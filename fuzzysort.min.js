// https://github.com/farzher/fuzzysort v2.0.2
((r,e)=>{"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():r.fuzzysort=e()})(this,r=>{var o,i,e,a,f=r=>{var e=v(r="string"!=typeof r?"":r);return{target:r,t:e.o,i:e.v,u:N,l:e.g,score:N,_:[0],obj:N}},n=r=>{r=(r="string"!=typeof r?"":r).trim();var e=v(r),a=[];if(e.p)for(var f,n=r.split(/\s+/),n=[...new Set(n)],t=0;t<n.length;t++)""!==n[t]&&(f=v(n[t]),a.push({v:f.v,o:n[t].toLowerCase(),p:!1}));return{v:e.v,g:e.g,p:e.p,o:e.o,h:a}},M=r=>{var e;return 999<r.length?f(r):(void 0===(e=t.get(r))&&(e=f(r),t.set(r,e)),e)},q=r=>{var e;return 999<r.length?n(r):(void 0===(e=s.get(r))&&(e=n(r),s.set(r,e)),e)},D=(r,e,a=!1)=>{if(!1===a&&r.p)return S(r,e);for(var a=r.o,f=r.v,n=f[0],t=e.i,o=f.length,i=t.length,v=0,s=0,u=0;;){if(n===t[s]){if(k[u++]=s,++v===o)break;n=f[v]}if(i<=++s)return N}var v=0,l=!1,g=0,d=e.u,c=(d===N&&(d=e.u=j(e.target)),s=0===k[0]?0:d[k[0]-1],0);if(s!==i)for(;;)if(i<=s){if(v<=0)break;if(200<++c)break;--v;s=d[C[--g]]}else if(f[v]===t[s]){if(C[g++]=s,++v===o){l=!0;break}++s}else s=d[s];var w=e.t.indexOf(a,k[0]),r=~w;if(r&&!l)for(var _=0;_<u;++_)k[_]=w+_;a=!1;r&&(a=e.u[w-1]===w);p=l?(b=C,g):(b=k,u);for(var b,p,x=0,h=0,_=1;_<o;++_)b[_]-b[_-1]!=1&&(x-=b[_],++h);if(x-=(12+(b[o-1]-b[0]-(o-1)))*h,0!==b[0]&&(x-=b[0]*b[0]*.2),l){for(var y=1,_=d[0];_<i;_=d[_])++y;24<y&&(x*=10*(y-24))}else x*=1e3;r&&(x/=1+o*o*1),a&&(x/=1+o*o*1),e.score=x-=i-o;for(_=0;_<p;++_)e._[_]=b[_];return e._.S=p,e},S=(r,e)=>{for(var a=new Set,f=0,n=N,t=0,o=r.h,i=0;i<o.length;++i){var v=o[i];if((n=D(v,e))===N)return N;f+=n.score,n._[0]<t&&(f-=t-n._[0]);for(var t=n._[0],s=0;s<n._.S;++s)a.add(n._[s])}r=D(r,e,allowSpaces=!0);if(r!==N&&r.score>f)return r;n.score=f;var u,i=0;for(u of a)n._[i++]=u;return n._.S=i,n},v=r=>{for(var e=r.length,a=r.toLowerCase(),f=[],n=0,t=!1,o=0;o<e;++o){var i=f[o]=a.charCodeAt(o);32===i?t=!0:n|=1<<(97<=i&&i<=122?i-97:48<=i&&i<=57?26:i<=127?30:31)}return{v:f,g:n,p:t,o:a}},j=r=>{for(var e=r.length,a=(r=>{for(var e=r.length,a=[],f=0,n=!1,t=!1,o=0;o<e;++o){var i=r.charCodeAt(o),v=65<=i&&i<=90,i=v||97<=i&&i<=122||48<=i&&i<=57,s=v&&!n||!t||!i,n=v,t=i;s&&(a[f++]=o)}return a})(r),f=[],n=a[0],t=0,o=0;o<e;++o)o<n?f[o]=n:(n=a[++t],f[o]=void 0===n?e:n);return f},t=new Map,s=new Map,k=[],C=[],E=r=>{for(var e=J,a=r.length,f=0;f<a;++f){var n=r[f];n!==N&&e<(n=n.score)&&(e=n)}return e===J?N:e},F=(r,e)=>{var a=r[e];if(void 0!==a)return a;for(var f=e,n=(f=Array.isArray(e)?f:e.split(".")).length,t=-1;r&&++t<n;)r=r[f[t]];return r},G=r=>"object"==typeof r,H=1/0,J=-H,K=[],N=null,O=(o=[],i=K.total=0,a=r=>{for(var e=o[n=0],a=1;a<i;){var f=a+1,n=a;f<i&&o[f].score<o[a].score&&(n=f),o[n-1>>1]=o[n],a=1+(n<<1)}for(var t=n-1>>1;0<n&&e.score<o[t].score;t=(n=t)-1>>1)o[n]=o[t];o[n]=e},(e={}).add=r=>{var e=i;o[i++]=r;for(var a=e-1>>1;0<e&&r.score<o[a].score;a=(e=a)-1>>1)o[e]=o[a];o[e]=r},e.j=r=>{var e;if(0!==i)return e=o[0],o[0]=o[--i],a(),e},e.k=r=>{if(0!==i)return o[0]},e.C=r=>{o[0]=r,a()},e);return{single:(r,e)=>{var a;return"farzher"==r?{target:"farzher was here (^-^*)/",score:0,_:[0]}:!r||!e||(r=q(r),G(e)||(e=M(e)),((a=r.g)&e.l)!==a)?N:D(r,e)},go:(r,e,a)=>{if("farzher"==r)return[{target:"farzher was here (^-^*)/",score:0,_:[0],obj:e?e[0]:N}];if(!r)if(a&&a.all){var f=e;var n=a;var t=[],o=(t.total=f.length,n&&n.limit||H);if(n&&n.key)for(var i=0;i<f.length;i++){var v=f[i];var s=F(v,n.key);if(!s)continue;if(!G(s))s=M(s);s.score=J;s._.S=0;var u=s;u={target:u.target,t:"",i:N,u:N,l:0,score:s.score,_:N,obj:v};t.push(u);if(t.length>=o)return t}else if(n&&n.keys)for(i=0;i<f.length;i++){v=f[i];var l=new Array(n.keys.length);for(var g=n.keys.length-1;g>=0;--g){s=F(v,n.keys[g]);if(!s){l[g]=N;continue}if(!G(s))s=M(s);s.score=J;s._.S=0;l[g]=s}l.obj=v;l.score=J;t.push(l);if(t.length>=o)return t}else for(i=0;i<f.length;i++){s=f[i];if(!s)continue;if(!G(s))s=M(s);s.score=J;s._.S=0;t.push(s);if(t.length>=o)return t}return t;return}else return K;var d=q(r),c=d.g,w=(d.p,a&&a.threshold||J),_=a&&a.limit||H,b=0,p=0,x=e.length;if(a&&a.key)for(var h=a.key,y=0;y<x;++y){var S=e[y];!(m=F(S,h))||(c&(m=G(m)?m:M(m)).l)!==c||(B=D(d,m))===N||B.score<w||(B={target:B.target,t:"",i:N,u:N,l:0,score:B.score,_:B._,obj:S},b<_?(O.add(B),++b):(++p,B.score>O.k().score&&O.C(B)))}else if(a&&a.keys)for(var j=a.scoreFn||E,k=a.keys,C=k.length,y=0;y<x;++y){for(var S=e[y],L=new Array(C),z=0;z<C;++z){h=k[z];(m=F(S,h))?(c&(m=G(m)?m:M(m)).l)!==c?L[z]=N:L[z]=D(d,m):L[z]=N}L.obj=S;var A=j(L);A===N||A<w||(L.score=A,b<_?(O.add(L),++b):(++p,A>O.k().score&&O.C(L)))}else for(var m,B,y=0;y<x;++y)!(m=e[y])||(c&(m=G(m)?m:M(m)).l)!==c||(B=D(d,m))===N||B.score<w||(b<_?(O.add(B),++b):(++p,B.score>O.k().score&&O.C(B)));if(0===b)return K;for(var I=new Array(b),y=b-1;0<=y;--y)I[y]=O.j();return I.total=b+p,I},highlight:(r,e,a)=>{if("function"==typeof e){var f=e;if((l=r)===N)return N;for(var n=l.target,t=n.length,o=(o=l._).slice(0,o.S).sort((r,e)=>r-e),i="",v=0,s=0,u=!1,l=[],g=0;g<t;++g){var d=n[g];if(o[s]===g){if(++s,u||(u=!0,l.push(i),i=""),s===o.length){i+=d,l.push(f(i,v++)),i="",l.push(n.substr(g+1));break}}else u&&(u=!1,l.push(f(i,v++)),i="");i+=d}return l}if(r===N)return N;void 0===e&&(e="<b>"),void 0===a&&(a="</b>");for(var c="",w=0,_=!1,b=r.target,p=b.length,x=(x=r._).slice(0,x.S).sort((r,e)=>r-e),h=0;h<p;++h){var y=b[h];if(x[w]===h){if(_||(_=!0,c+=e),++w===x.length){c+=y+a+b.substr(h+1);break}}else _&&(_=!1,c+=a);c+=y}return c},prepare:f,indexes:r=>r._.slice(0,r._.S).sort((r,e)=>r-e),cleanup:()=>{t.clear(),s.clear(),k=[],C=[]}}});